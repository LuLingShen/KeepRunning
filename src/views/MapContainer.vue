<template>
  <div>
     <div id="map" style="width:500px;height:500px;border:1px solid black;"></div>
     <span id="address"></span>
  </div>
</template>

<script>
  import AMapLoader from '@amap/amap-jsapi-loader';
  export default {
    mounted(){
      //使用AMapLoader加载AMap对象，从而获取AMap实例
       window._AMapSecurityConfig = {
        securityJsCode:'5d45a96ce0dced57a8def828e021ef13',
    }

        AMapLoader.load({
            key:"b4c7d12c9a8828dbcb44441d1a070acc",            
            version:"2.0",    
            plugins:['AMap.ToolBar','AMap.Weather','AMap.Geocoder']
        }).then((AMap)=>{
          let map=new AMap.Map('map')  
          map.addControl(new AMap.ToolBar())

           var weather = new AMap.Weather();
           //执行实时天气信息查询
           weather.getForecast('北京市', function(err, data) {
          console.log(err, data); });

           map.setMapStyle('amap://styles/dark');
           map.setCenter([118.300503,36.827581],true)
           map.setZoom(18)
          

          var geocoder = new AMap.Geocoder({city: '全国'})
            var lnglat = [118.300503,36.827581]
           geocoder.getAddress(lnglat, function(status, result) {
            if (status === 'complete'&&result.regeocode) {
                var address = result.regeocode.formattedAddress;
                document.getElementById('address').innerHTML = address;
            }else{
                log.error('根据经纬度查询地址失败')
            }
        });
    
           geocoder.getLocation('北京市清华大学', function(status, result) {
            if (status === 'complete' && result.info === 'OK') {
              // result中对应详细地理坐标信息
              console.log('清华大学:',result.geocodes[0].location);
           }
          })


          //贝塞尔曲线
          //贝赛尔曲线经过的起点，途经点，控制点，终点的二维数组
          var startPoint = [[118.301115,36.826994]]; // 起点
          var viaPoint1 = [[118.301115,36.826994], [118.301286,36.827295]]; // 控制点，途经点
          var viaPoint2 = [[118.301115,36.826994], [118.301286,36.827295], [118.301361,36.827552]]; // 控制点，控制点，途经点
          var viaPoint3 = [[118.301115,36.826994], [118.301286,36.827295], [118.301361,36.827552],[118.301372,36.827836]]; 
          var viaPoint4= [[118.301115,36.826994], [118.301286,36.827295], [118.301361,36.827552],[118.301372,36.827836],[118.301383,36.828093]]; 
          var viaPoint5= [[118.301115,36.826994], [118.301286,36.827295], [118.301361,36.827552],[118.301372,36.827836],[118.301383,36.828093],[118.301254,36.828291]];
          var viaPoint6= [[118.301115,36.826994], [118.301286,36.827295], [118.301361,36.827552],[118.301372,36.827836],[118.301383,36.828093],[118.301254,36.828291],[118.301093,36.828488]];
          var viaPoint7= [[118.301115,36.826994], [118.301286,36.827295], [118.301361,36.827552],[118.301372,36.827836],[118.301383,36.828093],[118.301254,36.828291],[118.301093,36.828488],[118.300578,36.828712]];
          var viaPoint8= [[118.301115,36.826994], [118.301286,36.827295], [118.301361,36.827552],[118.301372,36.827836],[118.301383,36.828093],[118.301254,36.828291],[118.301093,36.828488],[118.300578,36.828712],[118.300117,36.828703]];
          var viaPoint9= [[118.301115,36.826994], [118.301286,36.827295], [118.301361,36.827552],[118.301372,36.827836],[118.301383,36.828093],[118.301254,36.828291],[118.301093,36.828488],[118.300578,36.828712],[118.300117,36.828703],[118.299816,36.82854]];
          var viaPoint10= [[118.301115,36.826994], [118.301286,36.827295], [118.301361,36.827552],[118.301372,36.827836],[118.301383,36.828093],[118.301254,36.828291],[118.301093,36.828488],[118.300578,36.828712],[118.300117,36.828703],[118.299816,36.82854],[118.29943,36.828205]];
          var viaPoint11= [[118.301115,36.826994], [118.301286,36.827295], [118.301361,36.827552],[118.301372,36.827836],[118.301383,36.828093],[118.301254,36.828291],[118.301093,36.828488],[118.300578,36.828712],[118.300117,36.828703],[118.299816,36.82854],[118.29943,36.828205],[118.299409,36.827904]];
          var viaPoint12= [[118.301115,36.826994], [118.301286,36.827295], [118.301361,36.827552],[118.301372,36.827836],[118.301383,36.828093],[118.301254,36.828291],[118.301093,36.828488],[118.300578,36.828712],[118.300117,36.828703],[118.299816,36.82854],[118.29943,36.828205],[118.299409,36.827904],[118.299323,36.827441]];
          var viaPoint13= [[118.301115,36.826994], [118.301286,36.827295], [118.301361,36.827552],[118.301372,36.827836],[118.301383,36.828093],[118.301254,36.828291],[118.301093,36.828488],[118.300578,36.828712],[118.300117,36.828703],[118.299816,36.82854],[118.29943,36.828205],[118.299409,36.827904],[118.299323,36.827441],[118.299355,36.82708]];
          var viaPoint14= [[118.301115,36.826994], [118.301286,36.827295], [118.301361,36.827552],[118.301372,36.827836],[118.301383,36.828093],[118.301254,36.828291],[118.301093,36.828488],[118.300578,36.828712],[118.300117,36.828703],[118.299816,36.82854],[118.29943,36.828205],[118.299409,36.827904],[118.299323,36.827441],[118.299355,36.82708],[118.299613,36.826702]];
          var viaPoint15= [[118.301115,36.826994], [118.301286,36.827295], [118.301361,36.827552],[118.301372,36.827836],[118.301383,36.828093],[118.301254,36.828291],[118.301093,36.828488],[118.300578,36.828712],[118.300117,36.828703],[118.299816,36.82854],[118.29943,36.828205],[118.299409,36.827904],[118.299323,36.827441],[118.299355,36.82708],[118.299613,36.826702],[118.300267,36.826548]];
          var viaPoint16= [[118.301115,36.826994], [118.301286,36.827295], [118.301361,36.827552],[118.301372,36.827836],[118.301383,36.828093],[118.301254,36.828291],[118.301093,36.828488],[118.300578,36.828712],[118.300117,36.828703],[118.299816,36.82854],[118.29943,36.828205],[118.299409,36.827904],[118.299323,36.827441],[118.299355,36.82708],[118.299613,36.826702],[118.300267,36.826548],[118.300632,36.826608]];
          var viaPoint17= [[118.301115,36.826994], [118.301286,36.827295], [118.301361,36.827552],[118.301372,36.827836],[118.301383,36.828093],[118.301254,36.828291],[118.301093,36.828488],[118.300578,36.828712],[118.300117,36.828703],[118.299816,36.82854],[118.29943,36.828205],[118.299409,36.827904],[118.299323,36.827441],[118.299355,36.82708],[118.299613,36.826702],[118.300267,36.826548],[118.300632,36.826608],[118.300889,36.826833]];
          var viaPoint18= [[118.301115,36.826994], [118.301286,36.827295], [118.301361,36.827552],[118.301372,36.827836],[118.301383,36.828093],[118.301254,36.828291],[118.301093,36.828488],[118.300578,36.828712],[118.300117,36.828703],[118.299816,36.82854],[118.29943,36.828205],[118.299409,36.827904],[118.299323,36.827441],[118.299355,36.82708],[118.299613,36.826702],[118.300267,36.826548],[118.300632,36.826608],[118.300889,36.826833],[118.301265,36.827166]];

          var endPoint = [[118.301115,36.826994], [118.301265,36.827166]]; // 控制点，终点

          var path = [
          startPoint,
          viaPoint1,
          viaPoint2,
          viaPoint3,
          viaPoint4,
          viaPoint5,
          viaPoint6,
          viaPoint7,
          viaPoint8,
          viaPoint9,
          viaPoint10,
          viaPoint11,
          viaPoint12,
          viaPoint13,
          viaPoint14,
          viaPoint15,
          viaPoint16,
          viaPoint17,
          viaPoint18,
          endPoint
          ]; 
  
        var bezierCurve = new AMap.BezierCurve({
        path: path,
        strokeWeight: 10, // 线条宽度
        strokeColor: '#F7B60E', // 线条颜色
        strokeOpacity :1,
        isOutline: false,	// 是否描边
        outlineColor: 'rgba(255,0,0,1)', // 描边颜色
        borderWeight: 5 // 描边宽度
});
  
        map.add(bezierCurve);

        //标注层
        // 创建一个标注层实例
      var labelsLayer = new AMap.LabelsLayer({
         collision: true,
           opacity: 1,
          zIndex: 1200,
           allowCollision: true,
      });
          // 将标注层添加到地图上
      map.add(labelsLayer);




        })
    },
    }
</script>
